<html lang="en">
<style>
  /* Custom player style */
  midi-player {
    display: block;
    width: inherit;
    height: 25px;
    margin: 0 0px 0rem 0px;
    margin-top: 0;
  }

  midi-player::part(control-panel) {
    background: linear-gradient(#fefefe, #e9e9e9);
    border: 1px solid #e9e9e9;
    border-top: none;
    border-radius: 0px 0px 10px 10px;
  }

  midi-visualizer .piano-roll-visualizer {
    background: #fefefe;
    border: 1px solid #e9e9e9;
    border-bottom: none;
    border-radius: 0px 0px 0 0;
    margin: 0 0px;
    margin-bottom: 0;
    width: inherit;
    overflow: auto;
  }

  midi-visualizer svg {
    margin: 2px;
  }

  midi-visualizer svg rect.note {
    opacity: calc(min(1, (var(--midi-velocity) + 30) / 128) * 0.75);
  }

  midi-visualizer svg rect.note.active {
    opacity: calc(min(1, (var(--midi-velocity) + 30) / 128) * 0.9);
    stroke: rgb(0, 0, 0);
    stroke-width: 1;
    stroke-opacity: 1;
  }

  midi-visualizer svg rect.note[data-program="0"] {
    fill: #1f77b4;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="8"] {
    fill: #2ca02c;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="16"] {
    fill: #ffbb78;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="24"] {
    fill: #07e1e9;
    opacity: 20%;
  }

  midi-visualizer svg rect.note[data-program="32"] {
    fill: #9467bd;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="40"] {
    fill: #8c564b;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="48"] {
    fill: #e377c2;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="56"] {
    fill: #ff7f0e;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="64"] {
    fill: #bcbd22;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="72"] {
    fill: #17becf;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="80"] {
    fill: #1b9e77;
    opacity: 50%;
  }

  midi-visualizer svg rect.note[data-program="88"] {
    fill: #d62728;
  }

  midi-visualizer svg rect.note[data-program="89"] {
    fill: #98df8a;
    opacity: 50%;
  }




  @import url(https://fonts.googleapis.com/css?family=Lato:400,700,900,300);

  /* MAKE IT CUTE ----- */
  .tabs {
    position: relative;
    display: flex;
    min-height: 250;
    border-radius: 10px 10px 0px 0px;
    overflow: hidden;
  }

  .tabby-tab {
    width: 200px;
  }

  .tabby-tab label {
    display: block;
    box-sizing: border-box;
    /* tab content must clear this */
    height: 25px;

    padding: 3px;
    text-align: center;
    background: #c4e7f0;
    cursor: pointer;
    border-radius: 10px 5px 10px 0px;
  }

  .tabby-tab label:hover {
    background: #82bcce;
  }

  .tabby-content {
    position: absolute;
    left: 0px;
    bottom: 0;
    right: 0px;
    /* clear the tab labels */
    top: 25;
    padding: 0px;
    border-radius: 0px 0px 0px 0px;
    background: #ffffff;
  }

  /* MAKE IT WORK ----- */
  .tabby-tab [type=radio] {
    display: none;
  }

  [type=radio]:checked~label {
    background: #3fb2d5;
    z-index: 2;
  }

  [type=radio]:checked~label~.tabby-content {
    z-index: 1;
    /* show/hide */
    opacity: 1;
    transform: scale(1);
  }
</style>

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Structured Arrangement NeurIPS-24</title>

  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">

  <!-- Custom Fonts -->
  <link
    href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
    rel='stylesheet' type='text/css'>
  <link
    href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic'
    rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css" type="text/css">

  <!-- Plugin CSS -->
  <link rel="stylesheet" href="css/animate.min.css" type="text/css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/main.css" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

  <style>
    div.indent2 {
      text-indent: -69px;
      padding-left: 69px;
    }
  </style>

</head>


<body id="page-top">
  <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
          data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav" style="display: flex; justify-content: center; width: 100%; float: none; gap: 40px;">
          <li>
            <a class="page-scroll" href="#abstract">Abstract</a>
          </li>
          <li>
            <a class="page-scroll" href="#arr_demo">Case Study</a>
          </li>
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>

  <section class="bg-white">
    <div class="container no-gutter small-padding" id="abstract">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading">Hi-Drum: A Novel Paradigm for Drum Transcription<br>Based on Large-Scale Pre-trained
          Models</h2>
        <hr class="primary">
        <h4 class="section-heading">Authors: Anonymous IJCAI submission</h4>
        <h3></h3>
      </div>

      <div class="col-sm-12 small-padding">
        <p class='text-justify'>
          <b>Abstract</b>: As a critical sub-task of Automatic Music Transcription (AMT), Automatic Drum Transcription
          (ADT) remains challenging. The difficulty stems from the inherent characteristics of percussive sound sources:
          drum sounds, unlike melodic instruments (e.g. violins and guitars), exhibit transient, broadband energy
          distributions and lack well-defined harmonic series, hindering the extraction of symbolic representations from
          music audio. Moreover, existing ADT methods often overlook the contextual dependencies of musical
          performances, failing to capture pattern consistency within musical sections and the evolution of fill
          passages between them.
          To address these limitations, we propose Hi-Drum, a novel paradigm combining a self-supervised music
          understanding model and a Large Language Model (LLM), integrated with a Hierarchical Drum Module (HDM). The
          HDM adopts a three-branch parallel architecture to explicitly model coarse-to-fine features, which effectively
          captures both local variations and global similarities. To further explore the critical roles of dynamics and
          timing, we design a multi-task fine-tuning strategy incorporating three core components of symbolic
          representations: onset, velocity, and frame detection.
          Extensive experiments on multiple open-source datasets demonstrate that Hi-Drum achieves state-of-the-art
          performance.
        </p>

        <div class="text-center" style="margin-top: 30px; margin-bottom: 30px;">
          <img src="picture/pipline.png" alt="Overall model architecture"
            style="width: 100%; max-width: 1000px; height: auto;">
          <p style="margin-top: 10px; font-style: italic;">Overall model architecture. The encoder extracts general
            music representations from the audio signal. Then it undergoes multi-scale feature aggregation through the
            three-branch HDM. Next, sequence modeling is performed by the Qwen decoder. Finally, the drum score
            prediction is generated through the multi-task fine-tuning module.</p>
        </div>

      </div>

    </div>

    <div class="container no-gutter small-padding" id="arr_demo">
      <div class="col-lg-12 text-center">
        <p class="h1">
          <hr class="primary">
        </p>
      </div>
      <p class="h3">Case Study</p>
      <p class='text-justify'>In this section, we present additional case studies to further demonstrate the robustness
        and generalization capability of Hi-Drum. These examples cover a diverse range of musical contexts, including
        various BPMs, genres, and drum timbres. By comparing Hi-Drum with the Ground Truth and the baseline OaF Drums,
        we highlight Hi-Drum's superior performance in capturing rapid onsets, maintaining rhythmic consistency, and
        preserving global musical structures across different complex scenarios.
      </p>

      <p class='text-justify'></p>
      <p class="h4"><b style="color:#6c06c0;">[Demo-01]</b> <b>Can You Feel the Love Tonight</b></p>
      <ul>
        <li><b>Genre:</b> Pop</li>
        <li><b>BPM:</b> 66</li>
      </ul>
      <div class="tabs">
        <div class="tabby-tab">
          <input type="radio" id="tab-1-1" name="tab-1" checked>
          <label for="tab-1-1">Ground Truth</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p1/multitrack.mid" id="demo_p1_multitrack-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p1/multitrack.mid" visualizer="#demo_p1_multitrack-visualizer"
              id="demo_p1_multitrack-player">
            </midi-player>
            <!-- 
              音频播放配置说明 / Audio Playback Configuration:
              浏览器会按顺序尝试加载音频源 (MP3 -> WAV -> FLAC)?
              Browser tries sources in order.
              详细说明请见根目录下?AUDIO_GUIDE.md
              See AUDIO_GUIDE.md for details.
            -->
            <audio id="demo_p1_multitrack-audio">
              <source src="demo/p1/multitrack.mp3" type="audio/mpeg">
              <source src="demo/p1/multitrack.wav" type="audio/wav">
              <source src="demo/p1/multitrack.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <div class="tabby-tab">
          <input type="radio" id="tab-1-2" name="tab-1">
          <label for="tab-1-2">Hi-Drum</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p1/piano.mid" id="demo_p1_piano-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p1/piano.mid" visualizer="#demo_p1_piano-visualizer" id="demo_p1_piano-player">
            </midi-player>
            <audio id="demo_p1_piano-audio">
              <source src="demo/p1/piano.mp3" type="audio/mpeg">
              <source src="demo/p1/piano.wav" type="audio/wav">
              <source src="demo/p1/piano.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <div class="tabby-tab">
          <input type="radio" id="tab-1-3" name="tab-1">
          <label for="tab-1-3">OaF Drums</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p1/leadsheet.mid" id="demo_p1_leadsheet-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p1/leadsheet.mid" visualizer="#demo_p1_leadsheet-visualizer"
              id="demo_p1_leadsheet-player">
            </midi-player>
            <audio id="demo_p1_leadsheet-audio">
              <source src="demo/p1/leadsheet.mp3" type="audio/mpeg">
              <source src="demo/p1/leadsheet.wav" type="audio/wav">
              <source src="demo/p1/leadsheet.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>
      </div>



      <p class='text-justify'></p>
      <p class="h4"><b style="color:#6c06c0;">[Demo-02]</b> <b>All I Want for Christmas is You</b></p>
      <ul>
        <li><b>Genre:</b> Pop</li>
        <li><b>BPM:</b> 150</li>
      </ul>
      <div class="tabs">
        <div class="tabby-tab">
          <input type="radio" id="tab-2-1" name="tab-2" checked>
          <label for="tab-2-1">Ground Truth</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p2/multitrack.mid" id="demo_p2_multitrack-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p2/multitrack.mid" visualizer="#demo_p2_multitrack-visualizer"
              id="demo_p2_multitrack-player">
            </midi-player>
            <audio id="demo_p2_multitrack-audio">
              <source src="demo/p2/multitrack.mp3" type="audio/mpeg">
              <source src="demo/p2/multitrack.wav" type="audio/wav">
              <source src="demo/p2/multitrack.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <div class="tabby-tab">
          <input type="radio" id="tab-2-2" name="tab-2">
          <label for="tab-2-2">Hi-Drum</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p2/piano.mid" id="demo_p2_piano-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p2/piano.mid" visualizer="#demo_p2_piano-visualizer" id="demo_p2_piano-player">
            </midi-player>
            <audio id="demo_p2_piano-audio">
              <source src="demo/p2/piano.mp3" type="audio/mpeg">
              <source src="demo/p2/piano.wav" type="audio/wav">
              <source src="demo/p2/piano.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <div class="tabby-tab">
          <input type="radio" id="tab-2-3" name="tab-2">
          <label for="tab-2-3">OaF Drums</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p2/leadsheet.mid" id="demo_p2_leadsheet-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p2/leadsheet.mid" visualizer="#demo_p2_leadsheet-visualizer"
              id="demo_p2_leadsheet-player">
            </midi-player>
            <audio id="demo_p2_leadsheet-audio">
              <source src="demo/p2/leadsheet.mp3" type="audio/mpeg">
              <source src="demo/p2/leadsheet.wav" type="audio/wav">
              <source src="demo/p2/leadsheet.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>
      </div>



      <p class='text-justify'></p>
      <p class="h4"><b style="color:#6c06c0;">[Demo-03]</b> <b>Over the Rainbow</b></p>
      <ul>
        <li><b>Genre:</b> Jazz</li>
        <li><b>BPM:</b> 80</li>
      </ul>
      <div class="tabs">
        <div class="tabby-tab">
          <input type="radio" id="tab-4-1" name="tab-4" checked>
          <label for="tab-4-1">Ground Truth</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p4/multitrack.mid" id="demo_p4_multitrack-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p4/multitrack.mid" visualizer="#demo_p4_multitrack-visualizer"
              id="demo_p4_multitrack-player">
            </midi-player>
            <audio id="demo_p4_multitrack-audio">
              <source src="demo/p4/multitrack.mp3" type="audio/mpeg">
              <source src="demo/p4/multitrack.wav" type="audio/wav">
              <source src="demo/p4/multitrack.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <div class="tabby-tab">
          <input type="radio" id="tab-4-2" name="tab-4">
          <label for="tab-4-2">Hi-Drum</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p4/piano.mid" id="demo_p4_piano-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p4/piano.mid" visualizer="#demo_p4_piano-visualizer" id="demo_p4_piano-player">
            </midi-player>
            <audio id="demo_p4_piano-audio">
              <source src="demo/p4/piano.mp3" type="audio/mpeg">
              <source src="demo/p4/piano.wav" type="audio/wav">
              <source src="demo/p4/piano.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>

        <div class="tabby-tab">
          <input type="radio" id="tab-4-3" name="tab-4">
          <label for="tab-4-3">OaF Drums</label>
          <div class="tabby-content">
            <midi-visualizer src="demo/p4/leadsheet.mid" id="demo_p4_leadsheet-visualizer">
            </midi-visualizer>
            <midi-player src="demo/p4/leadsheet.mid" visualizer="#demo_p4_leadsheet-visualizer"
              id="demo_p4_leadsheet-player">
            </midi-player>
            <audio id="demo_p4_leadsheet-audio">
              <source src="demo/p4/leadsheet.mp3" type="audio/mpeg">
              <source src="demo/p4/leadsheet.wav" type="audio/wav">
              <source src="demo/p4/leadsheet.flac" type="audio/flac">
              Your browser does not support the audio tag.
            </audio>
          </div>
        </div>
      </div>


    </div>




    <div class="container no-gutter small-padding">
      <p class="h1">
        <hr class="primary">
      </p>
      <h5>This site leverages <a href="https://volny.github.io/creative-theme-jekyll/" target="_blank">the jekyll
          template</a> and uses <a href="https://cifkao.github.io/html-midi-player/"
          target="_blank">html-midi-player</a> for MIDI visiualization and <a
          href="https://www.native-instruments.com/ni-tech-manuals/kontakt-factory-library-manual/en/welcome-to-the-kontakt-factory-library-2"
          target="_blank">Kontakt Factory Library 2</a>/<a href="https://www.bandlab.com/" target="_blank">BandLab</a>
        for MIDI-to-audio synthesis.</h5>
    </div>

  </section>

  <!-- jQuery -->
  <script src="js/jquery.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/jquery.fittext.js"></script>
  <script src="js/wow.min.js"></script>

  <!-- Custom Theme JavaScript -->
  <script src="js/creative.js"></script>


  <script
    src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>

  <script>

    var i_vis;
    var visualizers = document.getElementsByTagName("midi-visualizer")
    for (i_vis = 0; i_vis < visualizers.length; i_vis++) {
      visualizers[i_vis].config = {
        noteHeight: 2.5,
        pixelsPerTimeStep: 20,
        minPitch: 32,
        maxPitch: 96,
      };
    }


    async function onDomReady() {
      const players = document.getElementsByTagName('midi-player');
      const audios = document.getElementsByTagName('audio');

      for (let i = 0; i < players.length; i++) {
        const player = players[i];
        const audio = audios[i]

        player.addEventListener('load', function () {
          const SeekBar = player.shadowRoot.querySelector('.seek-bar');
          SeekBar.addEventListener('input', function () {
            audio.pause();
          });
          SeekBar.addEventListener('change', function () {
            audio.currentTime = player.currentTime;
            if (player.playing) {
              const playPromise = audio.play();
              if (playPromise !== undefined) {
                playPromise.catch(error => {
                  console.log("Audio play prevented or failed (likely missing file):", error);
                });
              }
            }
          });
        })
        player.addEventListener('start', function () {
          audio.currentTime = player.currentTime;
          const playPromise = audio.play();
          if (playPromise !== undefined) {
            playPromise.catch(error => {
              console.log("Audio play prevented or failed (likely missing file):", error);
            });
          }
        });
        player.addEventListener('stop', function () {
          audio.pause();
        });
      }
    }
    document.addEventListener("DOMContentLoaded", onDomReady, false);



  </script>
</body>

</html>
